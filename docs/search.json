[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mesas de ping pong en CABA 🏓",
    "section": "",
    "text": "dataURL = \"https://raw.githubusercontent.com/fer-aguirre/ping-pong-caba/main/data/pingpong-caba.csv\"\n\nfetch(dataURL)\n  .then(response =&gt; {\n    if (!response.ok) throw new Error(response.status);\n    return response.text();\n  });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndata = d3.csv(dataURL)\n\nbarrio_geo = await FileAttachment(\"./data/ba_barrios.geo.json\").json()\n\nzone_geo = await FileAttachment(\"./data/zonas.geo.json\").json()\n\nd3 = require('d3@5', 'd3-array@^2.2')\n\nimport {select} from \"@jashkenas/inputs\"\n\nimport {svgGradientDefs} from \"@luciyer/svg-gradients-chrome-safari\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof barrio_overlay = select([\"Mostrar barrios\", \"Ocultar barrios\"])\n\n map = {\n  \n  var style = {\n    height: 600,\n    margin: 20,\n    barrio_stroke: \"#000\",\n    barrio_stroke_width: 1,\n    barrio_stroke_opacity: 1,\n    zone_stroke: \"#BBB\",\n    zone_stroke_width: 0.5,\n    zone_stroke_opacity: 1\n  };\n  \n  let projection = d3.geoMercator()\n      .fitSize([width - style.margin * 2, \n                style.height - style.margin * 2], barrio_geo);\n  \n  const svg = d3.create(\"svg\")\n    .attr(\"viewBox\", [0, 0, width, style.height])\n    .attr('width', width)\n    .attr('height', style.height);\n\n  const zone_map = svg.append('g')\n    .attr(\"class\", \"zone-map\")\n    .attr(\"transform\", `translate(${style.margin}, ${style.margin})`);\n  \n  const tooltip = d3.select(\"body\").append(\"div\")\n    .attr(\"class\", \"svg-tooltip\")\n    .style(\"position\", \"absolute\")\n    .style(\"visibility\", \"hidden\")\n    .style(\"font-size\", \"1rem\")\n    .style(\"background\", \"rgba(255,255,255, 2555)\")\n    .style(\"padding\", \"0.1rem 0.5rem\")\n    .style(\"color\", \"#000\")\n    .style(\"border-radius\", \"3px\")\n    .style(\"border\", \"1px solid #000\");\n  \n  let mouseover = function (d) {\n    d3.select(this).style(\"opacity\", 0.5);\n  }\n\n  let mouseout = function (d) {\n    d3.select(this).style(\"opacity\", 1);\n  }\n  \n  zone_map.append(\"g\")\n    .selectAll(\"path\")\n      .data(zone_geo.features)\n      .enter() \n      .append(\"path\") \n        .attr(\"fill\", \"#FFF\") \n        .attr(\"stroke\", style.zone_stroke) \n        .attr(\"stroke-opacity\", style.zone_stroke_opacity)\n        .attr(\"stroke-width\", style.zone_stroke_width)\n        .attr(\"d\", d3.geoPath().projection(projection));\n  \n  if(barrio_overlay === \"Mostrar barrios\") {\n    \n    let barrio_map = svg.append(\"g\")\n      .attr(\"class\", \"barrio-map\")\n      .attr(\"transform\", `translate(${style.margin}, ${style.margin})`);\n\n    barrio_map.append(\"g\")\n      .selectAll(\"path\")\n        .data(barrio_geo.features)\n        .enter() \n        .append(\"path\") \n          .attr(\"fill\", \"none\") \n          .attr(\"stroke\", style.barrio_stroke) \n          .attr(\"stroke-opacity\", style.barrio_stroke_opacity)\n          .attr(\"stroke-width\", style.barrio_stroke_width)\n          .attr(\"d\", d3.geoPath().projection(projection)); \n    \n  }\n  \n  let points = svg.append(\"g\")\n    .attr(\"class\", \"points\")\n    .attr(\"transform\", `translate(${style.margin}, ${style.margin})`);\n  \n  points.selectAll(\"image\")\n    .data(data)\n    .enter()\n    .append(\"image\")\n      .attr(\"xlink:href\", \"https://github.com/fer-aguirre/ping-pong-caba/blob/main/assets/logo.png?raw=true\") \n      .attr(\"x\", function(d) { return projection([d.long, d.lat])[0]; })\n      .attr(\"y\", function(d) { return projection([d.long, d.lat])[1]; })\n      .attr(\"width\", \"20px\")\n      .attr(\"height\", \"20px\")\n    .style(\"opacity\", 1)\n    .on(\"mouseover\", mouseover)\n    .on(\"mouseout\", mouseout)\n    .on(\"click\", function (d) { \n      let tooltipText = \"&lt;b&gt;\" + d.plaza + \"&lt;/b&gt;&lt;br&gt;&lt;i&gt;&lt;a href='\" + d.google_maps + \"' target='_blank'&gt;Haz clic para abrir la ubicación en Google Maps&lt;/a&gt;&lt;/i&gt;\";\n      if (d.direccion) tooltipText += \"&lt;br&gt;Dirección: \" + d.direccion;\n      if (d.comuna) tooltipText += \"&lt;br&gt;\" + d.comuna;\n      if (d.mesas) tooltipText += \"&lt;br&gt;Mesas: \" + Math.round(d.mesas);\n      tooltip\n        .style(\"visibility\", \"visible\")\n        .style(\"top\", (d3.event.pageY - 10) + \"px\")\n        .style(\"left\", (d3.event.pageX + 10) + \"px\")\n        .html(tooltipText);\n      d3.select(this)\n        .style(\"opacity\", 1);\n    });\n\n  return svg.node();\n  \n}"
  },
  {
    "objectID": "pages/datos.html",
    "href": "pages/datos.html",
    "title": "¿Cómo se recopilaron los datos?",
    "section": "",
    "text": "Los datos contienen información sobre lugares públicos con mesas de ping pong en la Ciudad Autónoma de Buenos Aires. La base fue construida manualmente a partir de noticias del sitio oficial del Gobierno de la Ciudad de Buenos Aires:\nSi tienes información adicional, correcciones o nuevos datos que podrían ser útiles, no dudes en ponerte en contacto conmigo. Tu contribución será valiosa para mejorar este proyecto."
  },
  {
    "objectID": "pages/datos.html#datos",
    "href": "pages/datos.html#datos",
    "title": "¿Cómo se recopilaron los datos?",
    "section": "Datos",
    "text": "Datos\n\ndataURL = \"https://raw.githubusercontent.com/fer-aguirre/ping-pong-caba/main/data/pingpong-caba.csv\"\n\nfetch(dataURL)\n  .then(response =&gt; {\n    if (!response.ok) throw new Error(response.status);\n    return response.text();\n  });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nd3 = require('d3')\n\ndata = d3.csv(dataURL)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nInputs.table(data)"
  }
]